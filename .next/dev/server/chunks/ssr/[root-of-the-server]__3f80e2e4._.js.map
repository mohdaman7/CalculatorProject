{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/src/lib/api/config/axios.config.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\n\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: true,\n});\n\n// Request interceptor to add auth token to requests\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = typeof window !== 'undefined' ? localStorage.getItem('calculator_token') : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle common errors\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n    \n    // Handle token expiration (401) and avoid infinite retry loops\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      \n      try {\n        // Here you can add token refresh logic if needed\n        // const response = await axios.post(`${API_BASE_URL}/auth/refresh-token`, {\n        //   refreshToken: getRefreshToken()\n        // });\n        // const { token } = response.data;\n        // localStorage.setItem('calculator_token', token);\n        // originalRequest.headers.Authorization = `Bearer ${token}`;\n        // return axiosInstance(originalRequest);\n      } catch (error) {\n        // If refresh fails, clear auth and redirect to login\n        if (typeof window !== 'undefined') {\n          localStorage.removeItem('calculator_token');\n          window.location.href = '/login';\n        }\n        return Promise.reject(error);\n      }\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,eAAe,iEAAmC;AAExD,MAAM,gBAAgB,qKAAK,CAAC,MAAM,CAAC;IACjC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAEA,oDAAoD;AACpD,cAAc,YAAY,CAAC,OAAO,CAAC,GAAG,CACpC,CAAC;IACC,MAAM,QAAQ,sCAAgC,0BAA2C;IACzF;;IAGA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,+CAA+C;AAC/C,cAAc,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,+DAA+D;IAC/D,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;QACF,iDAAiD;QACjD,4EAA4E;QAC5E,oCAAoC;QACpC,MAAM;QACN,mCAAmC;QACnC,mDAAmD;QACnD,6DAA6D;QAC7D,yCAAyC;QAC3C,EAAE,OAAO,OAAO;YACd,qDAAqD;YACrD;;YAIA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/src/lib/api/services/BaseService.js"],"sourcesContent":["import axiosInstance from '../config/axios.config';\n\nclass BaseService {\n  constructor(endpoint) {\n    this.endpoint = endpoint;\n  }\n\n  // Create a new resource\n  async create(data) {\n    try {\n      const response = await axiosInstance.post(this.endpoint, data);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Get all resources with optional query parameters\n  async getAll(params = {}) {\n    try {\n      const response = await axiosInstance.get(this.endpoint, { params });\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Get a single resource by ID\n  async getById(id) {\n    try {\n      const response = await axiosInstance.get(`${this.endpoint}/${id}`);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Update a resource by ID\n  async update(id, data) {\n    try {\n      const response = await axiosInstance.put(`${this.endpoint}/${id}`, data);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Delete a resource by ID\n  async delete(id) {\n    try {\n      const response = await axiosInstance.delete(`${this.endpoint}/${id}`);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Custom request method for non-CRUD operations\n  async request(config) {\n    try {\n      const response = await axiosInstance({\n        ...config,\n        url: `${this.endpoint}${config.url || ''}`,\n      });\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  // Handle API errors consistently\n  handleError(error) {\n    console.error('API Error:', error);\n    \n    // You can add more sophisticated error handling here\n    const errorMessage = error.response?.data?.message || error.message || 'Something went wrong';\n    \n    // You could also integrate with a global error handling system here\n    // e.g., show a toast notification\n    \n    throw new Error(errorMessage);\n  }\n}\n\nexport default BaseService;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;IACJ,YAAY,QAAQ,CAAE;QACpB,IAAI,CAAC,QAAQ,GAAG;IAClB;IAEA,wBAAwB;IACxB,MAAM,OAAO,IAAI,EAAE;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACzD,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,mDAAmD;IACnD,MAAM,OAAO,SAAS,CAAC,CAAC,EAAE;QACxB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAAE;YAAO;YACjE,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,8BAA8B;IAC9B,MAAM,QAAQ,EAAE,EAAE;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI;YACjE,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,0BAA0B;IAC1B,MAAM,OAAO,EAAE,EAAE,IAAI,EAAE;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,EAAE;YACnE,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,0BAA0B;IAC1B,MAAM,OAAO,EAAE,EAAE;QACf,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI;YACpE,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,gDAAgD;IAChD,MAAM,QAAQ,MAAM,EAAE;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,8KAAa,EAAC;gBACnC,GAAG,MAAM;gBACT,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,OAAO,GAAG,IAAI,IAAI;YAC5C;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,iCAAiC;IACjC,YAAY,KAAK,EAAE;QACjB,QAAQ,KAAK,CAAC,cAAc;QAE5B,qDAAqD;QACrD,MAAM,eAAe,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;QAEvE,oEAAoE;QACpE,kCAAkC;QAElC,MAAM,IAAI,MAAM;IAClB;AACF;uCAEe"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/src/lib/api/services/AuthService.js"],"sourcesContent":["import BaseService from './BaseService';\nimport axiosInstance from '../config/axios.config';\n\nclass AuthService extends BaseService {\n  constructor() {\n    super('/auth');\n  }\n\n  async register(userData) {\n    try {\n      const response = await axiosInstance.post(`${this.endpoint}/register`, userData);\n      if (response.data.token) {\n        this.saveToken(response.data.token);\n      }\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  async login(credentials) {\n    try {\n      const response = await axiosInstance.post(`${this.endpoint}/login`, credentials);\n      if (response.data.token) {\n        this.saveToken(response.data.token);\n      }\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  async getCurrentUser() {\n    try {\n      const response = await axiosInstance.get(`${this.endpoint}/me`);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  async updateForcedNumber(forcedNumbers) {\n    try {\n      const response = await axiosInstance.put(`${this.endpoint}/forced-number`, forcedNumbers);\n      return response.data;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  logout() {\n    this.removeToken();\n  }\n\n  isAuthenticated() {\n    if (typeof window === 'undefined') return false;\n    return !!localStorage.getItem('calculator_token');\n  }\n\n  saveToken(token) {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('calculator_token', token);\n      // Update the default Authorization header\n      axiosInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    }\n  }\n\n  removeToken() {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('calculator_token');\n      delete axiosInstance.defaults.headers.common['Authorization'];\n    }\n  }\n}\n\nexport default new AuthService();\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,oBAAoB,4KAAW;IACnC,aAAc;QACZ,KAAK,CAAC;IACR;IAEA,MAAM,SAAS,QAAQ,EAAE;QACvB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YACvE,IAAI,SAAS,IAAI,CAAC,KAAK,EAAE;gBACvB,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,CAAC,KAAK;YACpC;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,MAAM,MAAM,WAAW,EAAE;QACvB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACpE,IAAI,SAAS,IAAI,CAAC,KAAK,EAAE;gBACvB,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,CAAC,KAAK;YACpC;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;YAC9D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,MAAM,mBAAmB,aAAa,EAAE;QACtC,IAAI;YACF,MAAM,WAAW,MAAM,8KAAa,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YAC3E,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,SAAS;QACP,IAAI,CAAC,WAAW;IAClB;IAEA,kBAAkB;QAChB,wCAAmC,OAAO;;;IAE5C;IAEA,UAAU,KAAK,EAAE;QACf;;IAKF;IAEA,cAAc;QACZ;;IAIF;AACF;uCAEe,IAAI"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/src/lib/api/services/CalculatorService.js"],"sourcesContent":["import BaseService from './BaseService';\n\nclass CalculatorService extends BaseService {\n  constructor() {\n    super('/calculator');\n  }\n\n  async saveCalculation(calculationData) {\n    try {\n      const response = await this.request({\n        method: 'POST',\n        url: '/history',\n        data: calculationData\n      });\n      return response;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n\n  async getHistory(params = {}) {\n    try {\n      const response = await this.request({\n        method: 'GET',\n        url: '/history',\n        params\n      });\n      return response;\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n}\n\nexport default new CalculatorService();\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,0BAA0B,4KAAW;IACzC,aAAc;QACZ,KAAK,CAAC;IACR;IAEA,MAAM,gBAAgB,eAAe,EAAE;QACrC,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,CAAC;gBAClC,QAAQ;gBACR,KAAK;gBACL,MAAM;YACR;YACA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;IAEA,MAAM,WAAW,SAAS,CAAC,CAAC,EAAE;QAC5B,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,CAAC;gBAClC,QAAQ;gBACR,KAAK;gBACL;YACF;YACA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,IAAI,CAAC,WAAW,CAAC;QACnB;IACF;AACF;uCAEe,IAAI"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/src/lib/api/index.js"],"sourcesContent":["// Export all services for easier imports\nexport { default as authService } from './services/AuthService';\nexport { default as calculatorService } from './services/CalculatorService';\n\n// Export axios instance in case it's needed directly\nexport { default as api } from './config/axios.config';\n"],"names":[],"mappings":"AAAA,yCAAyC;;AACzC;AACA;AAEA,qDAAqD;AACrD"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///home/mohd-aman/Downloads/calculator-pwa/contexts/AuthContext.jsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { authService } from '@/src/lib/api';\n\nconst AuthContext = createContext();\n\n// Default context value for when AuthProvider is not available\nconst defaultContextValue = {\n  user: null,\n  loading: false,\n  error: null,\n  login: async () => {},\n  register: async () => {},\n  logout: () => {},\n  updateForcedNumber: async () => {},\n  isAuthenticated: false\n};\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  useEffect(() => {\n    if (!mounted) return;\n    \n    const initAuth = async () => {\n      if (authService.isAuthenticated()) {\n        try {\n          const data = await authService.getCurrentUser();\n          setUser(data.user);\n        } catch (error) {\n          console.error('Failed to get current user:', error);\n          authService.logout();\n        }\n      }\n      setLoading(false);\n    };\n\n    initAuth();\n  }, [mounted]);\n\n  const login = async (email, password) => {\n    try {\n      setError(null);\n      setLoading(true);\n      const data = await authService.login({ email, password });\n      setUser(data.user);\n      return data;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const register = async (username, email, password) => {\n    try {\n      setError(null);\n      setLoading(true);\n      const data = await authService.register({ username, email, password });\n      setUser(data.user);\n      return data;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const logout = () => {\n    authService.logout();\n    setUser(null);\n    setError(null);\n  };\n\n  const updateForcedNumber = async (forcedNumbers) => {\n    try {\n      setError(null);\n      const data = await authService.updateForcedNumber(forcedNumbers);\n      setUser(prev => ({ \n        ...prev, \n        forcedNumber: data.forcedNumber,\n        secondForceNumber: data.secondForceNumber,\n        secondForceTriggerNumber: data.secondForceTriggerNumber\n      }));\n      return data;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  const value = {\n    user,\n    loading,\n    error,\n    login,\n    register,\n    logout,\n    updateForcedNumber,\n    isAuthenticated: !!user\n  }\n\n  return (\n    <AuthContext.Provider value={{\n        user,\n        loading,\n        error,\n        login,\n        register,\n        logout,\n        updateForcedNumber,\n        isAuthenticated: !!user,\n      }}\n    >\n      {!loading && children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    return defaultContextValue;\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAHA;;;;AAKA,MAAM,4BAAc,IAAA,2OAAa;AAEjC,+DAA+D;AAC/D,MAAM,sBAAsB;IAC1B,MAAM;IACN,SAAS;IACT,OAAO;IACP,OAAO,WAAa;IACpB,UAAU,WAAa;IACvB,QAAQ,KAAO;IACf,oBAAoB,WAAa;IACjC,iBAAiB;AACnB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,sOAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sOAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sOAAQ,EAAC;IAEvC,IAAA,uOAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAA,uOAAS,EAAC;QACR,IAAI,CAAC,SAAS;QAEd,MAAM,WAAW;YACf,IAAI,0NAAW,CAAC,eAAe,IAAI;gBACjC,IAAI;oBACF,MAAM,OAAO,MAAM,0NAAW,CAAC,cAAc;oBAC7C,QAAQ,KAAK,IAAI;gBACnB,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,+BAA+B;oBAC7C,0NAAW,CAAC,MAAM;gBACpB;YACF;YACA,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,QAAQ,OAAO,OAAO;QAC1B,IAAI;YACF,SAAS;YACT,WAAW;YACX,MAAM,OAAO,MAAM,0NAAW,CAAC,KAAK,CAAC;gBAAE;gBAAO;YAAS;YACvD,QAAQ,KAAK,IAAI;YACjB,OAAO;QACT,EAAE,OAAO,OAAO;YACd,SAAS,MAAM,OAAO;YACtB,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,WAAW,OAAO,UAAU,OAAO;QACvC,IAAI;YACF,SAAS;YACT,WAAW;YACX,MAAM,OAAO,MAAM,0NAAW,CAAC,QAAQ,CAAC;gBAAE;gBAAU;gBAAO;YAAS;YACpE,QAAQ,KAAK,IAAI;YACjB,OAAO;QACT,EAAE,OAAO,OAAO;YACd,SAAS,MAAM,OAAO;YACtB,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,SAAS;QACb,0NAAW,CAAC,MAAM;QAClB,QAAQ;QACR,SAAS;IACX;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,SAAS;YACT,MAAM,OAAO,MAAM,0NAAW,CAAC,kBAAkB,CAAC;YAClD,QAAQ,CAAA,OAAQ,CAAC;oBACf,GAAG,IAAI;oBACP,cAAc,KAAK,YAAY;oBAC/B,mBAAmB,KAAK,iBAAiB;oBACzC,0BAA0B,KAAK,wBAAwB;gBACzD,CAAC;YACD,OAAO;QACT,EAAE,OAAO,OAAO;YACd,SAAS,MAAM,OAAO;YACtB,MAAM;QACR;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,CAAC,CAAC;IACrB;IAEA,qBACE,mQAAC,YAAY,QAAQ;QAAC,OAAO;YACzB;YACA;YACA;YACA;YACA;YACA;YACA;YACA,iBAAiB,CAAC,CAAC;QACrB;kBAEC,CAAC,WAAW;;;;;;AAGnB;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,wOAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,OAAO;IACT;IACA,OAAO;AACT"}}]
}